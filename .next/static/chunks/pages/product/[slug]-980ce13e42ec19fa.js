(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2915],{67725:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return n(865)}])},865:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return $},default:function(){return ee}});var r=n(85893),i=n(90948),a=n(10760),s=n(87357),o=n(65582),c=n(40044),l=(n(74167),n(9029)),u=n(67434),d=n(69849),m=n(30403),h=n(67294),x=function(e){var t=e.product;return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(m.H3,{mb:2,children:"Specification:"}),(0,r.jsx)(s.Z,{children:t.description})]})},p=function(e){var t=e.product;return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(m.H3,{mb:2,children:"Instructions:"}),(0,r.jsx)(s.Z,{children:t.instructions})]})},f=n(38679),g=n(72428),j=n(86886),v=n(18128),b=n(67449),Z=n(44588),y=n(55503),w=n(11163),C=n(734),H=n(55678),S=n(9502),I=function(e){var t=e.product,n=e.slug,i=e.total,a=e.average,o=t.id,c=t.mrp,u=t.length,d=t.width,x=t.height,p=t.name,I=t.imgGroup,A=t.manufacturer,T=t.author,P=(t.aliasCode,t.stock),k=t.weight,O=t.isbn,_=t.salePrice,R=t.sku,N=(t.publisherFlag,t.discount),E=_,L=_-_*N/100,B=(0,h.useState)(""),D=B[0],q=B[1];(0,h.useEffect)((function(){if(window.localStorage){var e=localStorage.getItem("currency");q(e)}}),[]);var W="https://chitralhive.com/api/media/",z=(0,w.useRouter)().query.id,F=(0,h.useState)(0),V=F[0],G=F[1],U=(0,h.useState)(!1),M=U[0],X=U[1],K=(0,h.useState)(0),Y=K[0],J=K[1],Q=(0,y.bp)(),$=Q.state,ee=Q.dispatch,te=$.cart.find((function(e){return e.id===o||e.id===z})),ne=function(e){return function(){G(e)}},re=(0,h.useCallback)((function(e){J(e),X(!0)}),[]),ie=(0,h.useCallback)((function(e,t){return function(){ee({type:"CHANGE_CART_AMOUNT",payload:{mrp:c,salePrices:L,sku:R,slug:n,price:L,qty:e,name:p,image:W+I[0],id:o||z}}),1==t?H.Am.success("Added to cart",{position:H.Am.POSITION.TOP_RIGHT}):H.Am.error("Removed from cart",{position:H.Am.POSITION.TOP_RIGHT})}}),[]);return(0,r.jsx)(s.Z,{width:"100%",children:(0,r.jsxs)(j.ZP,{container:!0,spacing:3,justifyContent:"space-around",children:[(0,r.jsxs)(j.ZP,{item:!0,md:6,xs:12,alignItems:"center",children:[(0,r.jsxs)(l.hs,{justifyContent:"center",mb:6,children:[(0,r.jsx)(Z.Z,{width:300,alt:p,height:300,loading:"eager",objectFit:"contain",src:W+"".concat(t.imgGroup[V]),onClick:function(){return re(I.indexOf(I[V]))}}),M&&(0,r.jsx)(C.Z,{src:I.map((function(e){return W+e})),onClose:function(){J(0),X(!1)},currentIndex:Y,backgroundStyle:{backgroundColor:"rgba(0,0,0,0.9)",zIndex:1501}})]}),(0,r.jsx)(l.hs,{overflow:"auto",children:I.map((function(e,t){return(0,r.jsx)(l.b0,{width:64,height:64,minWidth:64,bgcolor:"white",border:"1px solid",borderRadius:"10px",ml:0===t?"auto":0,style:{cursor:"pointer"},onClick:ne(t),mr:t===I.length-1?"auto":"10px",borderColor:V===t?"primary.main":"grey.400",children:(0,r.jsx)(v.Z,{src:W+"".concat(e),variant:"square",height:40})},t)}))})]}),(0,r.jsxs)(j.ZP,{item:!0,md:6,xs:12,alignItems:"center",children:[(0,r.jsx)(m.H1,{mb:2,children:p}),(0,r.jsxs)(l.hs,{alignItems:"center",mb:2,children:[(0,r.jsx)(s.Z,{lineHeight:"1",children:"Rated:"}),(0,r.jsx)(s.Z,{mx:1,lineHeight:"1",children:(0,r.jsx)(S.Z,{color:"warn",fontSize:"1.25rem",value:a&&a?a:0,readOnly:!0})}),(0,r.jsxs)(m.H6,{lineHeight:"1",children:["(",i&&i?i:0,")"]})]}),"NOT AVAILABLE"===A||""===A||void 0===A||"null"===A||null===A?"":(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Manufacturer:"}),(0,r.jsx)(m.H6,{ml:1,children:A})]}),"NOT AVAILABLE"===T||""===T||void 0===T||"null"===T||null===T?"":(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Author:"}),(0,r.jsx)(m.H6,{ml:1,children:T})]}),"NOT AVAILABLE"===k||""===k||"0"===k||void 0===k||"null"===k||null===k?"":(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Weight:"}),(0,r.jsxs)(m.H6,{ml:1,children:[k," grams"]})]}),"NOT AVAILABLE"===O||""===O||void 0===O||null===O||"null"===O?"":(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Isbn:"}),(0,r.jsx)(m.H6,{ml:1,children:O})]}),0!=u||0!=d||0!=x?(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Dimensions:"}),(0,r.jsxs)(m.H6,{ml:1,children:[u&&0!=u?"L: "+u:""," ",0!=u&&0!=d?"x":""," ",d&&0!=d?"W: "+d:""," ",0==u&&0==d||0==x?"":"x"," ",x&&0!=x?"H: "+x:""]})]}):"",R&&""!=R||void 0!=R||null!=R?(0,r.jsxs)(l.hs,{alignItems:"center",mb:1,children:[(0,r.jsx)(s.Z,{children:"Product SKU / CODE:"}),(0,r.jsx)(m.H6,{ml:1,children:R})]}):"",(0,r.jsxs)(s.Z,{mb:3,children:[(0,r.jsxs)(m.H2,{color:"primary.main",mt:5,lineHeight:"1",children:[D,". ",L.toFixed(2)]}),!!N&&(0,r.jsx)(m.H4,{color:"primary.main",mt:2,ml:2,lineHeight:"1",children:(0,r.jsxs)("del",{children:[" ",D,". ",null===E||void 0===E?void 0:E.toFixed(2)]})}),"0.00"===P?(0,r.jsxs)(l.hs,{alignItems:"center",mt:1.5,children:[(0,r.jsx)(m.H5,{color:"inherit",children:"Stock : "}),(0,r.jsx)(m.H6,{color:"red",children:" Out of Stock "})]}):""]}),"0.00"===P?(0,r.jsx)(b.Z,{color:"primary",disabled:!0,variant:"contained",sx:{mb:4.5,px:"1.75rem",height:40},children:"Add to Cart"}):(null===te||void 0===te?void 0:te.qty)?(0,r.jsxs)(l.hs,{alignItems:"center",mb:4.5,children:[(0,r.jsx)(b.Z,{size:"small",sx:{p:1},color:"primary",variant:"outlined",onClick:ie((null===te||void 0===te?void 0:te.qty)-1,!1),children:(0,r.jsx)(f.Z,{fontSize:"small"})}),(0,r.jsx)(m.H3,{fontWeight:"600",mx:2.5,children:null===te||void 0===te?void 0:te.qty.toString().padStart(2,"0")}),(0,r.jsx)(b.Z,{size:"small",sx:{p:1},color:"primary",variant:"outlined",onClick:ie((null===te||void 0===te?void 0:te.qty)+1,!0),children:(0,r.jsx)(g.Z,{fontSize:"small"})})]}):(0,r.jsx)(b.Z,{color:"primary",variant:"contained",onClick:ie(1,!0),sx:{mb:4.5,px:"1.75rem",height:40},children:"Add to Cart"})]})]})})},A=(n(41664),n(9008)),T=n.n(A);function P(e){var t=e.data;return(0,r.jsx)(T(),{children:(0,r.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}},"structured-data")})}var k=n(47568),O=n(26042),_=n(69396),R=n(34051),N=n.n(R),E=n(95884),L=n(61903),B=n(83321),D=n(82580),q=n(74231),W=n(50237),z=n(8342),F=n.n(z),V=function(e){var t=(0,W.Z)(new Date,new Date(e));return t<60?t+" minutes ago":(t=F()(t/60))<24?"".concat(t," hour").concat(0===t?"":"s"," ago"):(t=F()(t/24))<30?"".concat(t," day").concat(0===t?"":"s"," ago"):(t=F()(t/30))<12?"".concat(t," month").concat(0===t?"":"s"," ago"):"".concat((t/=12).toFixed(1)," year").concat(0===F()(t)?"":"s"," ago")},G=function(e){var t=e.username,n=e.imgUrl,i=e.rating,a=e.date,o=e.review;return(0,r.jsxs)(s.Z,{mb:4,maxWidth:"600px",children:[(0,r.jsxs)(l.hs,{alignItems:"center",mb:2,children:[(0,r.jsx)(v.Z,{src:n,height:48,width:48}),(0,r.jsxs)(s.Z,{ml:2,children:[(0,r.jsx)(m.H5,{mb:.5,children:t}),(0,r.jsxs)(l.hs,{alignItems:"center",children:[(0,r.jsx)(S.Z,{value:i,color:"warn",readOnly:!0}),(0,r.jsx)(m.H6,{mx:1.25,children:i}),(0,r.jsx)(m.Dr,{children:V(a)})]})]})]}),(0,r.jsx)(m.nv,{color:"grey.700",ml:9,children:o})]})},U=n(33299),M={rating:0,comment:"",date:(new Date).toISOString()},X=q.Ry().shape({rating:q.Rx().required("required"),comment:q.Z_().required("required")}),K=function(e){var t=e.itemid,n=e.reviews,i=e.itemname,a=(0,U.useSession)().data,o=function(){var e=(0,k.Z)(N().mark((function e(n,r){var s,o,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.resetForm,e.prev=1,(o=new FormData).append("rating",n.rating),o.append("comment",n.comment),o.append("userid",a.user.id),o.append("username",a.user.name),o.append("itemid",t),o.append("itemname",i),e.next=11,fetch("https://chitralhive.com/api/addReviews",{method:"POST",headers:{Authorization:"Bearer "+a.accessToken},body:o});case 11:if((c=e.sent).ok){e.next=14;break}throw new Error("Failed to add address");case 14:return e.next=16,c.json();case 16:e.sent,H.Am.success("Review Added Successfully",{position:H.Am.POSITION.TOP_RIGHT}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error(e.t0);case 23:s();case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,n){return e.apply(this,arguments)}}(),c=(0,D.TA)({onSubmit:o,initialValues:M,validationSchema:X}),u=c.dirty,d=c.values,x=c.errors,p=c.touched,f=c.isValid,g=c.handleBlur,j=c.handleChange,v=c.handleSubmit,b=c.setFieldValue;return(0,r.jsxs)(s.Z,{children:[n.map((function(e,t){return(0,h.createElement)(G,(0,_.Z)((0,O.Z)({},e),{key:t}))})),a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.H2,{fontWeight:"600",mt:7,mb:2.5,children:"Write a Review for this product"}),(0,r.jsxs)("form",{onSubmit:v,children:[(0,r.jsxs)(s.Z,{mb:2.5,children:[(0,r.jsxs)(l.hs,{mb:1.5,gap:.5,children:[(0,r.jsx)(m.H5,{color:"grey.700",children:"Your Rating"}),(0,r.jsx)(m.H5,{color:"error.main",children:"*"})]}),(0,r.jsx)(E.Z,{color:"warn",size:"medium",value:d.rating,onChange:function(e,t){return b("rating",t)}})]}),(0,r.jsxs)(s.Z,{mb:3,children:[(0,r.jsxs)(l.hs,{mb:1.5,gap:.5,children:[(0,r.jsx)(m.H5,{color:"grey.700",children:"Your Review"}),(0,r.jsx)(m.H5,{color:"error.main",children:"*"})]}),(0,r.jsx)(L.Z,{rows:8,multiline:!0,fullWidth:!0,name:"comment",variant:"outlined",onBlur:g,value:d.comment,onChange:j,placeholder:"Write a review here...",error:!!p.comment&&!!x.comment,helperText:p.comment&&x.comment})]}),(0,r.jsx)(B.Z,{variant:"contained",color:"primary",type:"submit",disabled:!(u&&f),children:"Submit"})]})]}):(0,r.jsx)(m.H5,{fontWeight:"600",mt:7,mb:2.5,children:"Please login to Write a Review for this product"})]})},Y=n(3815),J=n(83454),Q=(0,i.ZP)(a.Z)((function(e){var t=e.theme;return{minHeight:0,marginTop:80,marginBottom:24,borderBottom:"1px solid ".concat(t.palette.text.disabled),"& .inner-tab":{minHeight:40,fontWeight:600,textTransform:"capitalize"}}})),$=((0,i.ZP)(s.Z)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%","& h1":{fontSize:"4rem",marginBottom:"1rem",color:t.palette.text.secondary},"& p":{fontSize:"1.2rem",marginBottom:"1.5rem",textAlign:"center",color:t.palette.text.secondary},"& a":{fontSize:"1.2rem",color:t.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}})),!0),ee=function(e){console.log("Propsssssss",e);var t=e.productDetails,n=e.ProductReviews,i=J.env.NEXT_PUBLIC_URL,a=((new Date).toLocaleDateString(),(0,h.useState)(t[0])),l=a[0],f=(a[1],(0,h.useState)(0)),g=f[0],j=f[1],v=(0,h.useState)([]),b=(v[0],v[1]),Z=(0,h.useState)([]),y=(Z[0],Z[1]),C=((0,w.useRouter)(),n.Reviews.filter((function(e){return e.itemid_id===l.id}))),H=C.reduce((function(e,t){return e+t.rating}),0)/C.length,S=(Math.min(Math.round(100*H)/100,5),"ChitralHive");J.env.NEXT_PUBLIC_URL,t[0].slug;(0,h.useEffect)((function(){(0,Y.E)().then((function(e){return b(e)})),(0,Y.C)().then((function(e){return y(e)}))}),[]);var A={"@context":"https://schema.org/","@type":"Product",name:t[0].name,image:["https://chitralhive.com/media/"+t[0].imgUrl],offers:{"@type":"Offer",url:i+"/product/"+t[0].slug,price:t[0].salePrice,priceCurrency:"PKR"}};return t[0].description&&(A.description=t[0].description),t[0].isbn,"NOT AVAILABLE"!==t[0].author&&void 0!=t[0].author&&t[0].author&&(A.author=t[0].author),"NOT AVAILABLE"!==t[0].manufacturer&&void 0!=t[0].manufacturer&&t[0].manufacturer&&(A.manufacturer=t[0].manufacturer),t[0].sku&&(A.sku=t[0].sku),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(P,{data:A}),(0,r.jsx)(u.Z,{title:t[0].name?t[0].name:{companyname:S},description:t[0].metaDescription&&"undefined"!=t[0].metaDescription?t[0].metaDescription:t[0].name?"Looking for "+t[0].name+"? Order online and get it to your door-step.":{companyname:S},metaTitle:t[0].metaTitle&&"undefined"!=t[0].metaTitle?t[0].metaTitle:t[0].name?"Buy "+t[0].name:{companyname:S}}),(0,r.jsxs)(o.Z,{sx:{my:4},children:[t[0]?(0,r.jsx)(I,{product:t[0],slug:t[0].slug,total:C.length,average:H}):(0,r.jsx)(m.H2,{children:"Loading..."}),(0,r.jsxs)(Q,{textColor:"primary",value:g,indicatorColor:"primary",onChange:function(e,t){return j(t)},children:[(0,r.jsx)(c.Z,{className:"inner-tab",label:"Description"}),(0,r.jsx)(c.Z,{className:"inner-tab",label:"Product Instructions"}),(0,r.jsx)(c.Z,{className:"inner-tab",label:"Review (".concat(C&&C.length>0?C.length:0,")")})]}),(0,r.jsxs)(s.Z,{mb:6,children:[0===g&&(0,r.jsx)(x,{product:l}),1===g&&(0,r.jsx)(p,{product:l}),2===g&&(0,r.jsx)(K,{itemid:l.id,itemname:l.name,reviews:n&&n.Reviews.filter((function(e){return e.itemid_id===l.id}))})]})]})]})}},9502:function(e,t,n){"use strict";var r=n(18339),i=n(13264),a=n(22428),s=n(98700),o=n(58706),c=(0,i.Z)(r.Z)((0,a.Z)(s.ZP,o.ZP));c.defaultProps={fontSize:"1.25rem"},t.Z=c},67434:function(e,t,n){"use strict";var r=n(85893),i=n(9008),a=n.n(i);n(67294);t.Z=function(e){var t=e.title,n=e.description,i=e.metaTitle;e.sitename;return"ChitralHive",(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:[t," | ","ChitralHive"]}),(0,r.jsx)("meta",{name:"title",content:i?i+" - "+t:"Buy Products Online - Ecommerce"}),(0,r.jsx)("meta",{name:"description",content:n||"Get in touch with Chitral Hive for authentic Chitrali products. We're here to help with your orders and inquiries. Contact us via phone, email, or visit our store in Chitral.Get in touch with Chitral Hive for authentic Chitrali products. We're here to help with your orders and inquiries. Contact us via phone, email, or visit our store in Chitral."})]})}},3815:function(e,t,n){"use strict";n.d(t,{C:function(){return c},E:function(){return l}});var r=n(47568),i=n(34051),a=n.n(i),s=n(9669),o=n.n(s),c=function(){var e=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/api/frequently-bought-products");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("/api/related-products");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},function(e){e.O(0,[2962,939,2478,5394,9579,9154,8339,760,9046,4210,7764,9849,9774,2888,179],(function(){return t=67725,e(e.s=t);var t}));var t=e.O();_N_E=t}]);